<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:l4d2addon_installer.ViewModels"
             mc:Ignorable="d" d:DesignWidth="400" d:DesignHeight="350"
             x:DataType="vm:OperationPanelViewModel"
             x:Class="l4d2addon_installer.Views.OperationPanelView">

    <Design.DataContext>
        <vm:OperationPanelViewModel />
    </Design.DataContext>

    <UserControl.Styles>
        <Style Selector="WrapPanel.top">
            <Setter Property="Orientation" Value="Horizontal" />
            <Setter Property="Margin" Value="2,2,0,0" />
            <Setter Property="LineSpacing" Value="5" />
            <Setter Property="ItemSpacing" Value="5" />
        </Style>

        <Style Selector="Panel.bottom">
            <Setter Property="Background" Value="#f9f9f9" />

            <Style Selector="^:pointerover">
                <Setter Property="Cursor" Value="Hand" />
            </Style>

            <Style Selector="^ Rectangle.border">
                <Setter Property="StrokeDashArray" Value="2, 2" />
                <Setter Property="Stroke" Value="#979292" />
                <Setter Property="StrokeThickness" Value="1" />
                <Setter Property="RadiusX" Value="7" />
                <Setter Property="RadiusY" Value="7" />
            </Style>

            <Style Selector="^ Panel.installer">
                <Setter Property="HorizontalAlignment" Value="Center" />
                <Setter Property="VerticalAlignment" Value="Center" />
                <Style Selector="^ TextBlock">
                    <Setter Property="FontSize" Value="13.5" />
                    <Setter Property="FontFamily" Value="serif, sans-serif" />
                    <Setter Property="Foreground" Value="#808080" />
                </Style>
            </Style>
        </Style>

        <!-- loading 遮罩层 -->
        <Style Selector="Panel.bottom Panel.loading-mask">
            <Setter Property="ZIndex" Value="2000" />
            <Setter Property="Background">
                <SolidColorBrush Color="White" Opacity="0.9" />
            </Setter>
            <Style Selector="^:pointerover">
                <Setter Property="Cursor" Value="Arrow" />
            </Style>

            <!-- loading 动画样式 -->
            <Style Selector="^ Canvas.circular">
                <Style.Animations>
                    <Animation Duration="0:0:2" IterationCount="Infinite" Easing="LinearEasing">
                        <KeyFrame Cue="100%">
                            <Setter Property="RotateTransform.Angle" Value="360" />
                        </KeyFrame>
                    </Animation>
                </Style.Animations>

                <Style Selector="^ Ellipse.path">
                    <Style.Animations>
                        <Animation Duration="0:0:1.5" IterationCount="Infinite" Easing="SineEaseInOut">
                            <KeyFrame Cue="0%">
                                <Setter Property="StrokeDashOffset" Value="0" />
                            </KeyFrame>
                            <KeyFrame Cue="100%">
                                <Setter Property="StrokeDashOffset" Value="120" />
                            </KeyFrame>
                        </Animation>
                    </Style.Animations>
                </Style>
            </Style>
        </Style>
    </UserControl.Styles>

    <Grid RowDefinitions="50*,50*">
        <WrapPanel Classes="top" Grid.Row="0">
            <Button Classes="button-primary" Command="{Binding OpenAddonsFloderCommand}">addons文件夹</Button>
            <Button Classes="button-primary" Command="{Binding OpenGameFolderCommand}">l4d2文件夹</Button>
            <Button Classes="button-primary" Command="{Binding OpenDownloadsFolderCommand}">下载文件夹</Button>
            <Button Classes="button-primary" Command="{Binding OpenRecycleBinFolderCommand}">打开回收站</Button>
            <Button Classes="button-primary" Command="{Binding StartGameCommand}">启动游戏</Button>
            <!-- <Button>关于</Button> -->
        </WrapPanel>

        <Panel Classes="bottom" Grid.Row="1" x:Name="BottomPanel">
            <Rectangle Classes="border" />
            <Panel Classes="installer">
                <TextBlock>此区域安装vpk</TextBlock>
            </Panel>
            <Canvas>
                <!-- todo ToggleButton按钮样式 -->
                <ToggleButton Canvas.Top="5" Canvas.Right="10">lkjlssadf</ToggleButton>
            </Canvas>
            <Panel Classes="loading-mask" IsVisible="{Binding ShowLoading}">
                <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                    <!-- 圆形加载动画 -->
                    <Canvas Width="50" Height="50" Classes="circular">
                        <Ellipse Width="40" Height="40" Classes="path"
                                 Stroke="#409eff"
                                 StrokeThickness="2"
                                 StrokeDashArray="60,60"
                                 StrokeDashOffset="0"
                                 StrokeLineCap="Round"
                                 Canvas.Left="5" Canvas.Top="5" />
                    </Canvas>

                    <!-- 加载文本 -->
                    <TextBlock Text="正在安装..."
                               Foreground="#409eff"
                               FontSize="13.5" />
                </StackPanel>
            </Panel>
        </Panel>
    </Grid>
</UserControl>